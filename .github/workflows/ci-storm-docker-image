name: storm-docker-image

on:
  push:
    branches:
    - 'master'
    paths:
    - '2.3.0/**'
  schedule:
    - cron: '0 0 1 * *'

jobs:
  build_image:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Build & Push
      uses: smarsh/storm-docker@latest
      env:
        DOCKER_USERNAME: abcd
        DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
        IMAGE_TO_BUILD: storm
        PIVNET_TOKEN: ${{ secrets.PIVNET_TOKEN }}